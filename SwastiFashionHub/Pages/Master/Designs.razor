@page "/master/designs"

@layout MainLayout
@inject IJSRuntime JsRuntime

@using SwastiFashionHub.Shared.Core.Models;
@using System.Linq
@using System.Reflection;
@using SwastiFashionHub.Shared.Core.Services.Interface;

<Breadcrumb Title="Designs" BreadcrumbPageTitle="Master"></Breadcrumb>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">

                <button class="btn font-16 btn-primary btn-block btn-sm mb-2" id="btn-new-event" @onclick="ShowModelClick">
                    <i class="mdi mdi-plus-circle-outline"></i>
                    Create New Design
                </button>

                @if (ItemsData != null)
                {
                    <SwastiFashionHub.Components.Data.Table
                           TItem=DesignViewModel
                           Items=@ItemsData
                           AllowEdit=true
                           AllowDelete=true>
                        <Columns>
                            <SwastiFashionHub.Components.Data.TextColumn Heading="Name"
                                        DataField=@nameof(@DesignViewModel.Name) />

                            <SwastiFashionHub.Components.Data.TextColumn Heading="Note"
                                        DataField=@nameof(@DesignViewModel.Note) />
                        </Columns>
                    </SwastiFashionHub.Components.Data.Table>
                   @* <Datatable T="DesignViewModel"
                           Columns="@Columns"
                           Data="@ItemsData"
                           EnableFiltering=true
                           EnablePagination=true
                           EnableSorting=true>
                    </Datatable>*@
                }
            </div>
        </div>
    </div> <!-- end col -->
</div> <!-- end row -->
<!-- Add New Event MODAL -->
<div class="modal fade @(ShowModel?"show d-block":"")" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header py-3 px-4 border-bottom-0">
                <h5 class="modal-title" id="modal-title">Design</h5>
                <button type="button" class="btn-close" @onclick="CloseModelClick" aria-hidden="true"></button>
            </div>
            <div class="modal-body p-4">
                <EditForm Model="@DesignModel" OnSubmit="@HandleSubmit" class="needs-validation">
                    <DataAnnotationsValidator />
                    <div class="row">
                        <div class="col-12">
                            <div class="mb-3">
                                <label class="form-label">Design Name</label>
                                <InputText class="form-control"
                                           placeholder="Design Name"
                                           type="text"
                                           name="DesignName"
                                           required
                                           @bind-Value="DesignModel.Name">
                                </InputText>
                                <ValidationMessage For="@(() => DesignModel.Name)" />
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="mb-3">
                                <label class="form-label">Design Image</label>
                                <div class="file_uploading">
                                    <div @ref="dropZoneElement" class="dropzone file-upload-wrapper">
                                        <a class="d-block">Add file or drop files to upload</a>
                                        <div @ref="inputFileContainer">
                                            <InputFile OnChange="@OnInputFileChange"
                                                       @onclick="OnInputFile" accept="image/*" />
                                        </div>
                                    </div>
                                    @if (!string.IsNullOrWhiteSpace(ErrorMessage))
                                    {
                                        <div class="text-danger text-center">
                                            @ErrorMessage
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="mb-3">
                                <label class="form-label">Note</label>
                                <InputTextArea class="form-control"
                                               placeholder="Note"
                                               rows="3"
                                               name="Note"
                                               @bind-Value="DesignModel.Note">
                                </InputTextArea>
                            </div>
                        </div>

                    </div>
                    <div class="row mt-2">
                        <div class="col-12 text-end">
                            <button type="button" class="btn btn-light me-1" @onclick="CloseModelClick">Close</button>
                            <button type="submit" class="btn btn-success" id="btn-save-event">Save</button>
                        </div>
                    </div>
                </EditForm>
            </div>
        </div> <!-- end modal-content-->
    </div> <!-- end modal dialog-->
</div>
<!-- end modal-->